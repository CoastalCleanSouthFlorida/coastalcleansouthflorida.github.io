import{u as h}from"./brand-crowd-api.CllSbtUY.js";import{U as f,Z as m,d as _,v as w,o as v,z as u,x as l,y as x,H as p,K as S}from"./entry.DvYAX4a8.js";import{c}from"./browser.DKkg-gxU.js";import{u as d,a as k}from"./consent.composable.q5hWcnuM.js";import"./cache-util.D-3ANEog.js";c.withTag("page-data.composable");c.withTag("Slug index");const M=o=>{const t=f(),i=d(),s=o.isCustomDomain,n=s?void 0:o.slug;return t.getRoutes().filter(e=>e.name).forEach(e=>{t.removeRoute(e.name)}),t.addRoute({name:"index",path:"/:slug?",redirect:e=>s&&o.viewModel.pages[0].slug===e.params.slug?"/":{name:"index",path:`/${n}`,params:{slug:n}}}),t.addRoute({name:"slug",path:"/:slug?",redirect:e=>s?{name:"slug-pageSlug",path:`/${e.params.slug}`,params:{pageSlug:e.params.slug}}:{name:"slug-pageSlug",path:`/${n}`,params:{slug:n}}}),t.addRoute({name:"slug-pageSlug",path:"/:slug?/:pageSlug?",component:m,props:{context:o.context,viewModel:o.viewModel}}),t.beforeEach((e,a)=>(window==null||window.scrollTo(0,0),e.fullPath!==a.fullPath)),t.afterEach(e=>{let a=e.params.pageSlug;a||(a=o.viewModel.pages[0].slug),o.context.currentPageSlug=a,i.pushTrackView(String(e.name),window.location.origin+e.fullPath)}),t},y={key:1},R=S("span",null,"Loading ...",-1),C=[R],T={key:2},$=_({__name:"index",async setup(o){let t,i;c.withTag("slug-page");const{data:s,pending:n}=([t,i]=w(async()=>h(async()=>{},"$4h8SMBKzA4")),t=await t,i(),t),r=s.value,e=d();r&&M(r);const a=k();return v(()=>{if(r){e.pushCustomerGA4(r.viewModel.measurementID);const g=a.initialise({featureEnabled:r.viewModel.cookieOptions.isCookieEnabled});e.startGTM(g)}}),(g,E)=>u(s)?(l(),x(u(m),{key:0,context:u(s).context,"view-model":u(s).viewModel},null,8,["context","view-model"])):u(n)?(l(),p("div",y,C)):(l(),p("div",T,"Unable to render page"))}});export{$ as default};
